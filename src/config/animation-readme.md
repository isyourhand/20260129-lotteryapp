# 抽奖动画配置说明

## 配置文件
所有动画时间参数统一在 `src/config/animation.ts` 中配置。

## 三阶段动画时间（毫秒）

```typescript
CARD_ANIMATION = {
  FLY_TO_CENTER: 500,      // 第1阶段：从球体飞到屏幕中央（0.5秒）
  SHOW_IN_CENTER: 2000,    // 第2阶段：在屏幕中央展示（2秒）
  FLY_TO_GRID: 1000,       // 第3阶段：从中央飞到右侧网格（1秒）
  TOTAL: 3500,             // 单张卡片总时长 = 0.5 + 2 + 1 = 3.5秒
}
```

## 卡片动画间隔

```typescript
LOTTERY_FLOW = {
  CARD_INTERVAL: 3500,     // 每张卡片动画间隔 = 3.5秒
}
```

卡片是**串行动画**：
- 第1张卡片：0ms 开始
- 第2张卡片：3500ms 开始（第1张完全到位后）
- 第3张卡片：7000ms 开始
- ...以此类推

## 弹窗弹出时机

弹窗在所有卡片飞行动画**完成后立即弹出**，无需额外等待：

```
第1张 0ms 开始飞 ──3.5s──→ 3500ms 到位
                                ↓
                        第2张立即开始飞
                                ↓
                        ...以此类推
                                ↓
                        最后一张到位后立即弹窗
```

因为 `reveal` 函数的递归调用链本身已经累积了足够的等待时间（每张卡片间隔 3500ms），所以当检测到所有卡片都已亮起时（`idx >= ws.length`），直接弹出弹窗即可。

## 弹窗内翻转动画

```typescript
FLIP_DELAY: 300,         // 弹窗出现后，等待300ms开始翻转
FLIP_INTERVAL: 120,      // 每张卡片翻转间隔120ms
```

## 完整时间线示例（以3人为例）

```
时间点        事件
─────────────────────────────────────────────────────────
T+0ms         开始揭晓第1张卡片
T+500ms       第1张卡片到达屏幕中央
T+2500ms      第1张卡片在中央展示结束，开始飞向右侧
T+3500ms      第1张卡片到达右侧 → 开始揭晓第2张卡片
T+4000ms      第2张卡片到达屏幕中央
T+6000ms      第2张卡片在中央展示结束，开始飞向右侧
T+7000ms      第2张卡片到达右侧 → 开始揭晓第3张卡片
T+7500ms      第3张卡片到达屏幕中央
T+9500ms      第3张卡片在中央展示结束，开始飞向右侧
T+10500ms     第3张卡片到达右侧 → 立即弹出中奖弹窗
T+10800ms     弹窗内开始翻转卡片（间隔120ms）
```

## 修改动画时间

只需修改 `src/config/animation.ts` 中的三个值：

```typescript
export const CARD_ANIMATION = {
  FLY_TO_CENTER: 500,      // 修改这里
  SHOW_IN_CENTER: 2000,    // 修改这里
  FLY_TO_GRID: 1000,       // 修改这里
}
```

**注意**：
- 修改后需要重新构建项目
- JS 和 CSS 会自动同步，无需修改其他文件
- 所有时间单位都是毫秒（ms）
